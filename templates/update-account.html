{% extends "base.html" %}

{% block title %}<title>Capstone Project</title>{% endblock title %}
{% block meta %}{% endblock meta %}

{% block navbar %}
{% endblock navbar %}

{% block content %}
	<div class="outter-container">
		<header class="header-row">{{username}}, <a href="/logout">Logout</a></header>
		<div class="page-title">Update Account</div>
		<form action="/update-account" method="post">
			

				First Name:<input class="input-box-50" type="text" name="firstName" value="{{details.fname}}" required />
				Last Name:<input class="input-box-50" type="text" name="lastName" value="{{details.lname}}" required />

				Email:<input class="input-box-50" type="email" id='email' name="email" value="{{details.email}}" required />
				Job Title:<input class="input-box-50" type="text" name="jobTitle" value="{{details.title}}" required />
				
				<div class="center-algin">Security questions</div>
				<div class="input-box-50 input">{{details.question1}}</div>
				<div class="input-box-50 input">{{details.answer1}}</div>

				<div class="input-box-50 input">{{details.question2}}</div>
				<div class="input-box-50 input">{{details.answer2}}</div>
				
				<!-- the file upload. the input is hidden behind my button -->
				
				<div id="file-load-button" class="input input-box-50 center-algin"> 
				    Upload signature image
				</div>
				<div class="no-display">
					<input type="file" name="sigfile" value="{{details.signature}}" id="file_input" accept=".png"/>
				</div>

				<div class="center-algin" id="status">Preview of signature
					<p><img id="preview" src="{{details.signature}}" /></p>
				</div>

				<input type="hidden" id="sig-url" name="signature" value="{{details.signature}}" />
				


				<input class="button-box" type="submit" value="Update Account">
		</form>
	</div>
	
	<!-- adds a timestamp to the src attribute for the image preview in order to prevent image caching -->
	<script> 
		var path = $("#preview").attr("src")
		var newPath = path + '?' + $.now()
		$("#preview").attr("src",newPath) 
	</script>
	
{% block javascript %}
    <SCRIPT SRC="/static/js/uploadSig.js"></SCRIPT>
{% endblock %}
{% endblock content %}
